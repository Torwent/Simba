// baseclass things should free left on assign
// just test things run ok.

{$assertions on}

procedure Test(img1, img2: TImage);

  procedure inner(var img: TImage);
  begin
    for 1 to 10 do
      img1 := img1.Copy();
  end;

begin
  img1 := img1.Copy();
  img1 := img1.Invert;

  inner(img1);
end;


var img: TImage;
begin
  img := TImage.Create(100,100);
  img.Fill(Colors.RED);
  img := img.Brightness(100);
  img := img.Downsample(2);

  for 1 to 5 do
    img := img.Brightness(100);

  Test(img, img);

  for 1 to 2 do
    Test(img, img);

  img := img.GreyScale();
  img.Free();

  Assert(GetLoadedImages() = []);
end.
